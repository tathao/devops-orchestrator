{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DevOps Orchestrator CLI","text":"<p>A production-ready private DevOps Orchestrator CLI for macOS \u2014 built with Zsh, Python 3.11, and Docker Compose. This tool automates environment setup, container orchestration, Vault secrets management, and Colima virtualization.</p>"},{"location":"#features","title":"\ud83d\ude80 Features","text":"<ul> <li>\ud83e\udde9 Automatic Colima startup (if available and not running)</li> <li>\ud83d\udc33 Docker Compose orchestration with environment awareness</li> <li>\ud83d\udd10 HashiCorp Vault automation (init, unseal, login, and agent setup)</li> <li>\u2699\ufe0f Config-driven management via <code>.env</code> and Python modules</li> <li>\ud83d\udce6 Template-based resource creation using Jinja2 templates</li> <li>\ud83e\uddf0 Extensible CLI architecture (easily add more services under <code>managers/</code>)</li> <li>\ud83e\ude84 Shell utilities &amp; display helpers for better CLI experience</li> </ul>"},{"location":"#requirements","title":"\u2699\ufe0f Requirements","text":"<ul> <li>macOS with Zsh shell</li> <li>Python 3.11+</li> <li>Docker Desktop or Colima</li> <li>Docker Compose v2+</li> <li>(Optional) HashiCorp Vault</li> </ul>"},{"location":"author/","title":"Author","text":""},{"location":"author/#author","title":"\ud83d\udca1 Author","text":"<p>Tathao Nguyen Senior Developer Engineer \ud83d\udce7 Contact: (tathaonguyenl@gmail.com)</p>"},{"location":"extend/","title":"Extending CLI","text":""},{"location":"extend/#extending-the-cli","title":"\ud83e\uddf1 Extending the CLI","text":"<p>To add a new command: 1. Create a new file in <code>managers/</code>, e.g. <code>example.py</code> 2. Define a class or function for the service logic 3. Register the command inside <code>cli.py</code></p>"},{"location":"license/","title":"License","text":""},{"location":"license/#license","title":"\ud83e\uddfe License","text":"<p>This project is licensed under the terms of the LICENSE file.</p>"},{"location":"structure/","title":"Overview","text":""},{"location":"structure/#project-structure","title":"\ud83c\udfd7\ufe0f Project Structure","text":"<pre><code>project/\n\u251c\u2500\u2500 cli.py                   # Main CLI entry point\n\u251c\u2500\u2500 .env                     # Environment configuration\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 setting.py           # Global config and environment loader\n\u251c\u2500\u2500 managers/\n\u2502   \u251c\u2500\u2500 colima.py            # Colima lifecycle management\n\u2502   \u251c\u2500\u2500 docker.py            # Docker orchestration logic\n\u2502   \u251c\u2500\u2500 vault.py             # HashiCorp Vault automation\n\u2502   \u251c\u2500\u2500 creator.py           # Template-based resource creator\n\u2502   \u2514\u2500\u2500 service.py           # Common service manager\n\u251c\u2500\u2500 utils/\n\u2502   \u251c\u2500\u2500 shell.py             # Shell command runner\n\u2502   \u251c\u2500\u2500 security.py          # Security utilities (e.g., secret handling)\n\u2502   \u251c\u2500\u2500 display.py           # Display and logging helpers\n\u2502   \u251c\u2500\u2500 exceptions.py        # Centralized exception definitions\n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 _vault_agent.j2      # Vault agent template\n\u2502   \u251c\u2500\u2500 mysql_vault/\n\u2502   \u2502   \u251c\u2500\u2500 template.yml\n\u2502   \u2502   \u251c\u2500\u2500 vault-agent-config.hcl.j2\n\u2502   \u2502   \u2514\u2500\u2500 docker-compose.j2\n\u2514\u2500\u2500 LICENSE\n</code></pre>"},{"location":"usage/","title":"Usage Guide","text":""},{"location":"usage/#setup","title":"\ud83d\udd27 Setup","text":"<ol> <li> <p>Clone this repository <code>bash    git clone https://github.com/&lt;your-username&gt;/&lt;your-repo&gt;.git    cd &lt;your-repo&gt;/project</code></p> </li> <li> <p>Create and configure <code>.env</code> file <code>bash    cp .env.example .env    # Edit environment variables as needed</code></p> </li> <li> <p>Install dependencies <code>bash    pip install -r requirements.txt</code></p> </li> <li> <p>Make CLI executable    ```bash    chmod +x cli.py</p> </li> </ol>"},{"location":"usage/#usage","title":"\ud83e\udde0 Usage","text":""},{"location":"usage/#1-run-cli-directly","title":"1. Run CLI directly","text":"<pre><code>python cli.py --help\n</code></pre>"},{"location":"usage/#2-or-create-a-shortcut","title":"2. Or create a shortcut","text":"<p>Add to your <code>.zshrc</code>:</p> <pre><code>alias devops=\"python /path/to/project/cli.py\"\n</code></pre> <p>Then run:</p> <pre><code>devops up\n</code></pre>"},{"location":"vault/","title":"Vault Integration","text":""},{"location":"vault/#vault-integration","title":"\ud83d\udd10 Vault Integration","text":"<p>This orchestrator supports Vault operations: - Initialization (<code>vault init</code>) - Unsealing using stored keys - Login with generated tokens - Template-based agent configuration</p> <p>Example:</p> <pre><code>python cli.py vault setup\n</code></pre>"},{"location":"template/mysql/","title":"\ud83d\udc2c MySQL + phpMyAdmin + Vault Agent Template","text":""},{"location":"template/mysql/#overview","title":"\ud83d\udcd8 Overview","text":"<p>This template deploys a standalone MySQL 8.0 server with phpMyAdmin UI, secured by HashiCorp Vault Agent integration for secret injection.</p> <p>The Vault Agent automatically retrieves and refreshes database credentials from Vault, mounting them as files inside the MySQL container at runtime \u2014 eliminating the need to hardcode secrets.</p> <p>This setup is designed to work seamlessly with Docker Compose, Colima (macOS), and a running Vault service.</p>"},{"location":"template/mysql/#components","title":"\ud83e\udde9 Components","text":"Service Description mysql MySQL 8.0 database container, configured with secrets read from Vault phpmyadmin Web-based management UI for MySQL vault-agent HashiCorp Vault Agent that authenticates and renders secrets to mounted files"},{"location":"template/mysql/#template-files","title":"\ud83d\udcc1 Template Files","text":"File Purpose <code>docker-compose.j2</code> Jinja2-based Docker Compose template for MySQL, phpMyAdmin, and Vault Agent <code>template.yml</code> Variable definition and description for the template generator <code>vault-agent-config.hcl.j2</code> Vault Agent configuration for secret rendering and token authentication <code>_vault_agent.j2</code> Shared Jinja macro used to inject the Vault Agent service configuration"},{"location":"template/mysql/#configuration-variables","title":"\u2699\ufe0f Configuration Variables","text":"<p>Defined in <code>template.yml</code>.</p> Variable Description Default <code>CONTAINER_NAME</code> Base name for all containers (e.g. <code>mysql-db</code>) <code>mysql-db</code> <code>MYSQL_PORT</code> Public port for MySQL access <code>3306</code> <code>PHPMYADMIN_PORT</code> Port for phpMyAdmin web UI <code>8080</code> <code>MYSQL_DATABASE</code> Initial database name <code>my_db</code> <code>MYSQL_USER</code> MySQL username <code>my_user</code> <code>SECRET_PATH</code> Vault path containing secrets <code>secret/data/mysql-db</code> <p>\ud83d\udca1 The Vault secret at <code>${SECRET_PATH}</code> should contain the following fields: <code>json {   \"data\": {     \"root_password\": \"&lt;root_password_value&gt;\",     \"user_password\": \"&lt;user_password_value&gt;\"   } }</code></p>"},{"location":"template/mysql/#vault-agent-integration","title":"\ud83d\udd10 Vault Agent Integration","text":"<p>The Vault Agent is configured to: 1. Authenticate to Vault using a static token (mounted at <code>/var/run/secrets/vault_token</code>). 2. Render secrets from Vault to local files:    - <code>/vault/secrets/root_password</code>    - <code>/vault/secrets/user_password</code> 3. These files are then consumed by the MySQL container through <code>_FILE</code> environment variables:    ```yaml    MYSQL_ROOT_PASSWORD_FILE: /vault/secrets/root_password    MYSQL_PASSWORD_FILE: /vault/secrets/user_password</p>"},{"location":"template/mysql/#secret-template-rendering","title":"\ud83e\udde0 Secret Template Rendering","text":"<p>From vault-agent-config.hcl.j2:</p> <pre><code>template {\n  source      = \"/vault/secrets/templates/root_password.ctmpl\"\n  destination = \"/vault/secrets/root_password\"\n}\n\ntemplate {\n  source      = \"/vault/secrets/templates/user_password.ctmpl\"\n  destination = \"/vault/secrets/user_password\"\n}\n</code></pre> <p>Each .ctmpl file uses Vault template syntax to pull data, for example:</p> <pre><code>{{ with secret \"secret/data/mysql-db\" }}\n{{ .Data.data.root_password }}\n{{ end }}\n</code></pre>"}]}